{% extends "base_bs.html" %}

{% block conteudo %}
    <div id="login">
        <div class="container">
            <div id="login-row" class="row justify-content-center align-items-center">
                <div id="login-column" class="col-md-12">
                    <div id="login-box" class="col-md-12">
                        <form id="login-form" class="form" action="" method="post">
                            {% csrf_token %}
                            <div class="row">
                                <div class="col"></div>
                                <div class="col-12 col-sm-12 col-md-12 col-xl-8 col-lg-10">
                                    <h3 class="text-center mb-4 mt-5">Cadastre seu usu√°rio</h3>
                                    <div class="form-group mb-0">
                                        <div class="row">
                                            {{ form.non_field_errors }}
                                            {% for field in form %}
                                                <div class="col-6 mt-3 mb-2">
                                                    <label class="text-left w-100 m-0 font-weight-bold text-muted">{{ field.label_tag }}</label>
                                                    <div>{{ field }}</div>
                                                    {{ field.errors }}
                                                </div>
                                            {% endfor %}
                                            <div class="col-12 mt-3">
                                                <div class="form-group">
                                                    <button type="submit" class="btn btn-primary w-100">Cadastrar</button>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <div class="col"></div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        $("input, select").addClass('form-control');
        $("label").addClass('mb-0');
        $('#cpf').mask("000.000.000-00");

        $('#id_zip_code').mask('00.000-000');
        $('#id_zip_code').on('change', function(ev){
            buscaCep(ev.target.value, '');
        });


        function buscaCep(value) {
            var Cep = value.replace(/\D/g, '');
            $.getJSON("https://viacep.com.br/ws/" + Cep + "/json/?callback=?", function (dados) {
                $("#id_address").val(dados.logradouro);
                $("#id_neighborhood").val(dados.bairro);
                $("#id_city").val(dados.localidade);
                $("#id_state").val(dados.uf);
                $("#id_number").focus();
            })
        }
    </script>
{% endblock %}